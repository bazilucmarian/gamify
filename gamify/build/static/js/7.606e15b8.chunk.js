(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[7],{102:function(e,t,n){"use strict";n(0);var a=n(7),c=n.p+"static/media/Empty.7e4b6dae.svg",r=n.p+"static/media/no-image.0b19f0b7.png",i=n(33),s=n(1);function l(e){var t=e.message,n=e.pathRedirect,c=e.image,l=Object(a.g)();return t?Object(s.jsx)("div",{className:"empty-placeholder",children:Object(s.jsxs)("div",{className:"empty-placeholder__content",children:[Object(s.jsx)("img",{className:"empty-placeholder__image",src:c,alt:"placeholder-img"}),Object(s.jsx)("p",{className:"empty-placeholder__message",children:t}),n&&Object(s.jsx)(i.a,{color:"secondary",variant:"outlined-secondary",size:"lg",onClick:function(){l.push(n)},children:"Go to available challenges \u27a1"})]})}):Object(s.jsx)("img",{className:"empty-placeholder__not-available",src:r,alt:"placeholder"})}l.defaultProps={message:"",pathRedirect:"",image:c};t.a=l},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={overviewPage:"Sorry... You have no challenge in progress or completed \ud83d\ude14",challengesPage:"Sorry... You have no challenge available \ud83d\ude14",shopPage:"Sorry... You have no challenge available \ud83d\ude14",shopPageAdmin:"Oups...you have to add some products, for that press add new button",validationPage:"Oups... you have no challenge to validate.",welcome:"Welcome to Gamify",notFound:"Page not found \ud83d\ude13"}},104:function(e,t,n){"use strict";n(0);var a=n(28),c=n.n(a),r=n(15),i=n(33),s=n(1);function l(e){var t=e.status,n=e.onValidate,a=e.onUpdateItem;return"inPending"===t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.a,{color:"fourth",variant:"outlined-fourth",size:"sm",onClick:function(){return n(r.g.denied)},children:"Deny"}),Object(s.jsx)(i.a,{color:"tertiary",variant:"contained-tertiary",size:"md",onClick:function(){return n(r.g.validated)},children:"Validate"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.a,{color:"secondary",variant:"outlined-secondary",size:"sm",onClick:function(){return a("DELETE")},children:"Delete"}),Object(s.jsx)(i.a,{color:"secondary",variant:"contained-secondary",size:"md",onClick:function(){return a("EDIT")},children:"Edit"})]})}l.defaultProps={onValidate:c.a.func,onUpdateItem:c.a.func,status:""},t.a=l},105:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(44),c=n(8),r=n(23),i=n(0),s=function(e,t,n,s){var l=Object(i.useState)(),o=Object(r.a)(l,2),d=o[0],u=o[1],h=Object(i.useState)({}),j=Object(r.a)(h,2),p=j[0],b=j[1],g=Object(i.useState)(!1),m=Object(r.a)(g,2),O=m[0],f=m[1],v=Object(i.useCallback)((function(){u(e)}),[e]);Object(i.useEffect)((function(){!Object.keys(p).length&&O&&(n(d),v(),f(!1))}),[p,d,O,n,v]),Object(i.useEffect)((function(){u(t)}),[t]);var x=Object(i.useCallback)((function(e,t,n){var r=e.target.value,i=e.target,s=i.id;"number"===i.type&&(r=Number(r)),u((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},s,r),t&&Object(a.a)({},t,n))}))}),[]),y=Object(i.useCallback)((function(e){e.preventDefault(),f(!0),b(s(d))}),[d,s]);return{fields:d,handleChange:x,resetForm:v,handleSubmit:y,errors:p}}},106:function(e,t,n){"use strict";var a=n(8),c=(n(0),n(113)),r=n.n(c),i=n(1);function s(e){var t=e.inputId,n=e.inputType,c=e.inputValue,s=e.inputOnChange,l=e.inputLabel,o=e.error,d=e.isRequired,u=e.className;return Object(i.jsxs)("div",{className:"form-group__container",children:[Object(i.jsx)("div",{className:"form-group",children:"file"===n?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(r.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64,n=e.file;return s("profilePicture",Object(a.a)(Object(a.a)({},c),{},{url:t,file:n.name}))}}),Object(i.jsx)("label",{className:"label-input-file",htmlFor:t,children:Object(i.jsx)("span",{children:l})}),Object(i.jsx)("span",{className:"label-input-file__file",children:c.file})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{className:"form-group__input ".concat(u),id:t,type:n,value:c,onChange:s,required:d,placeholder:"placeholder"}),Object(i.jsx)("label",{className:"form-group__label",htmlFor:t,children:Object(i.jsx)("span",{className:"content",children:l})})]})}),o&&Object(i.jsx)("span",{className:"form-group__error",children:o})]})}s.defaultProps={error:"",inputValue:"",className:"",isRequired:!0},t.a=s},107:function(e,t,n){"use strict";n(0);var a=n(1);function c(e){var t=e.title,n=e.isScrollable,c=e.hasData,r=e.children;return Boolean(c)&&Object(a.jsxs)("section",{className:"challenges-section",children:[Object(a.jsx)("h2",{className:"challenges-section__title",children:t}),Object(a.jsx)("div",{className:"challenges-section__items challenges-section__items--".concat(n&&"scrollable"),children:r})]})}c.defaultProps={isScrollable:!1},t.a=c},108:function(e,t,n){"use strict";n(0);var a=n(15),c=n(16),r=n(104),i=n(33),s=n(1);var l=function(e){var t=e.status,n=e.onClick;switch(t){case a.g.inProgress:return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.a,{color:"secondary",variant:"outlined-secondary",size:"sm",onClick:function(){return n(a.g.available)},children:"Quit"}),Object(s.jsx)(i.a,{color:"secondary",variant:"contained-secondary",size:"md",onClick:function(){return n(a.g.inPending)},children:"Complete"})]});case a.g.inPending:return Object(s.jsx)(i.a,{size:"lg",disabled:!0,children:"Pending ..."});case a.g.validated:return Object(s.jsx)(i.a,{color:"tertiary",size:"lg",disabled:!0,children:"Validated"});case a.g.denied:return Object(s.jsx)(i.a,{color:"fourth",size:"lg",disabled:!0,children:"Denied"});default:return Object(s.jsx)(i.a,{color:"secondary",variant:"contained-secondary",size:"lg",onClick:function(){return n(a.g.inProgress)},children:"Enroll"})}},o=n(45),d=n(46);function u(e){var t=e.isAdmin,n=e.challenge,i=e.onChangeStatus,u=e.onUpdateChallenge,h=n.status;return Object(s.jsx)("div",{className:"challenge-card challenge-card--".concat(Object(a.b)(h)," challenge-card--").concat(t&&h===c.a.inPending&&"validation"),children:Object(s.jsxs)("div",{className:"challenge-card__content challenge-card__content--".concat(t&&h===c.a.inPending&&"extend"),children:[t&&h===c.a.inPending&&Object(s.jsx)("div",{children:Object(s.jsx)(d.a,{userName:n.userName,jobTitle:n.jobTitle,image:n.profilePicture})}),Object(s.jsxs)("div",{className:"challenge-card__top",children:[Object(s.jsx)("div",{className:"challenge-card__title",children:n.title}),Object(s.jsx)(o.a,{xp:n.xp,credits:n.credits})]}),Object(s.jsx)("div",{className:"challenge-card__middle",children:Object(s.jsx)("p",{className:"challenge-card__description",children:n.description})}),Object(s.jsx)("div",{className:"challenge-card__bottom",children:t?Object(s.jsx)(r.a,{status:h,onValidate:i,onUpdateItem:u}):Object(s.jsx)(l,{status:h,onClick:i})})]})})}u.defaultProps={onChangeStatus:function(){},onUpdateChallenge:function(){},isAdmin:!1};t.a=u},118:function(e,t,n){"use strict";var a=n(0),c=n(7),r=n(19),i=n(1);t.a=function(e){var t=e.page,n=e.itemsLength,s=e.path,l=Object(c.g)(),o=Math.ceil(n/6),d=n;return Object(a.useEffect)((function(){t<1?l.push("".concat(s,"?page=1")):t>o&&l.push("".concat(s,"?page=").concat(o))}),[l,o,t,s]),Object(i.jsxs)("div",{className:"pagination",children:[Object(i.jsx)(r.b,{to:"".concat(s,"?page=").concat(t-1),className:t<=1?"link-disabled":"",children:"\u2b05Prev"}),Object(i.jsxs)("p",{children:["Page ",t," of ",o," "]}),Object(i.jsxs)("p",{children:[d," Products Total"]}),Object(i.jsx)(r.b,{to:"".concat(s,"?page=").concat(t+1),className:t>=o?"link-disabled":"",children:"Next\u27a1"})]})}},123:function(e,t,n){"use strict";n.r(t);var a=n(23),c=n(0),r=n(7),i=n(33),s=n(107),l=n(48),o=n(105);function d(e){var t={};return e.title.trim().length<6?t.title="Please lengthen title to ".concat(6," characters or more"):null!==e.title.match(/[!"#$%*<>?^~\xa7\xa9\xae\xb0\xb6]+/)&&(t.title="Remove special characters from the title."),e.xp>=1&&e.xp<=200||(t.xp="XP must be between ".concat(1," and ").concat(200)),e.credits>=1&&e.credits<=200||(t.credits="Credits must be between ".concat(1," and ").concat(200)),e.description.trim().length<10&&(t.description="Please lengthen description to ".concat(10," characters or more")),t}var u=n(29),h=n(106),j=n(1);function p(e){var t=e.closeModal,n=e.isEditing,a=e.handleSubmit,c=e.handleChange,r=e.fields,s=e.errors;return Object(j.jsxs)("form",{className:"form",onSubmit:a,children:[Object(j.jsxs)("div",{className:"form__container",children:[Object(j.jsx)(h.a,{inputLabel:"Title",inputOnChange:c,inputValue:null===r||void 0===r?void 0:r.title,inputType:"text",inputId:"title",error:s.title}),Object(j.jsxs)("div",{className:"form__wrapper",children:[Object(j.jsx)(h.a,{inputLabel:"XP (number)",inputOnChange:c,inputValue:null===r||void 0===r?void 0:r.xp,inputType:"number",inputId:"xp",error:s.xp}),Object(j.jsx)(h.a,{inputLabel:"Credits (number)",inputOnChange:c,inputValue:null===r||void 0===r?void 0:r.credits,inputType:"number",inputId:"credits",error:s.credits})]}),Object(j.jsx)(h.a,{inputLabel:"Description",inputOnChange:c,inputValue:null===r||void 0===r?void 0:r.description,inputType:"text",inputId:"description",error:s.description})]}),Object(j.jsx)("div",{className:"buttons-container",children:Object(j.jsxs)("div",{className:"buttons-container__wrapper",children:[Object(j.jsx)(i.a,{variant:"outlined-secondary",color:"secondary",size:"sm",onClick:t,children:"Cancel"}),Object(j.jsx)(i.a,{variant:"contained-secondary",color:"secondary",size:"sm-1",type:"submit",children:n?"Edit":"Add"})]})})]})}p.defaultProps={errors:{},fields:{}};var b=p,g={title:"",xp:0,credits:0,description:""};function m(e){var t=e.isOpen,n=e.hide,a=e.currentChallenge,c=e.handleAddNewChallenge,r=e.handleEditChallenge,i=Boolean(null===a||void 0===a?void 0:a.id),s=i?r:c,l=Object(o.a)(g,a,s,d),h=l.fields,p=l.handleChange,m=l.handleSubmit,O=l.errors;return Object(j.jsxs)(u.a,{isOpen:t,hide:n,children:[Object(j.jsx)(u.a.Header,{children:Object(j.jsx)("div",{className:"modal__title",children:i?Object(j.jsx)("h1",{children:"Edit challenge"}):Object(j.jsx)("h1",{children:"Add challenge"})})}),Object(j.jsx)(u.a.Body,{children:Object(j.jsx)(b,{closeModal:n,currentChallenge:a,handleEditChallenge:r,addNewChallenge:c,isEditing:i,errors:O,fields:h,handleSubmit:m,handleChange:p})})]})}m.defaultProps={currentChallenge:g};var O=m,f=n(102),v=n(13),x=n.n(v),y=n(18),C=n(97),_=n(40),N=n(27),P=n(30);var k=n(118),E=n(108),w=n(20),S=n(111),z=n(41),D=function(e){var t=Object(w.b)();function n(){return(n=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("/api/challenges",n,Object(_.a)(e));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),{onSuccess:function(e){t.invalidateQueries(P.a.allChallenges),z.b.success(e.message)}})},L=function(e){var t=Object(w.b)();function n(){return(n=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.put("/api/challenges/".concat(n.id),n,Object(_.a)(e));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),{onSuccess:function(e){z.b.success(e.message),t.invalidateQueries(P.a.allChallenges)},onError:function(e){z.b.error(e.response.data.message)}})},T=function(e){var t=Object(w.b)();function n(){return(n=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.delete("/api/challenges/".concat(n.id),Object(_.a)(e));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),{onSuccess:function(e){t.invalidateQueries(P.a.allChallenges),z.b.success(e.message)},onError:function(e){z.b.error(e.response.data.message)}})},A=n(103);t.default=function(e){var t=e.user,n=Object(l.a)(),o=n.isOpen,d=n.hideModal,u=n.showModal,h=Object(c.useState)(null),p=Object(a.a)(h,2),b=p[0],g=p[1],m=Object(r.h)(),v=Number(new URLSearchParams(m.search).get("page")),w=function(e,t){function n(){return(n=Object(y.a)(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.get("/api/challenges/?_page=".concat(t,"&_limit=").concat(6),Object(_.a)(e));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(C.a)([P.a.allChallenges,t],(function(){return n.apply(this,arguments)}),{keepPreviousData:!0})}(t,v),S=w.data,z=w.isLoading,V=w.isError,F=w.error,I=D(t),U=I.mutate,R=I.isLoading,M=L(t),Q=M.mutate,q=M.isLoading,B=T(t).mutate,Y=function(e){return function(t){e&&"EDIT"===t?(g(e),u()):e&&"DELETE"===t&&B(e)}};return Object(c.useEffect)((function(){(R||q)&&d()}),[d,R,q]),z?null:V?Object(j.jsx)(f.a,{message:F.response.data.message}):S.totalAvailable?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.a,{title:"Challenges",hasData:S.allChallenges.length,children:S.allChallenges.map((function(e){return Object(j.jsx)(E.a,{challenge:e,isAdmin:!0,onUpdateChallenge:Y(e)},e.id)}))}),Object(j.jsx)(k.a,{page:v,itemsLength:S.totalAvailable,path:"/admin/challenges"}),Object(j.jsx)(O,{isOpen:o,hide:d,currentChallenge:b,handleAddNewChallenge:U,handleEditChallenge:Q}),Object(j.jsx)("div",{className:"add-button",children:Object(j.jsx)(i.a,{color:"secondary",variant:"contained-secondary",size:"sm-1",onClick:function(){u(),g(null)},children:"Add new"})})]}):Object(j.jsx)(f.a,{message:A.a.challengesPage})}}}]);
//# sourceMappingURL=7.606e15b8.chunk.js.map