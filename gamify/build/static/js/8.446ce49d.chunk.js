(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[8],{102:function(e,t,n){"use strict";n(0);var a=n(7),r=n.p+"static/media/Empty.7e4b6dae.svg",s=n.p+"static/media/no-image.0b19f0b7.png",c=n(33),i=n(1);function l(e){var t=e.message,n=e.pathRedirect,r=e.image,l=Object(a.g)();return t?Object(i.jsx)("div",{className:"empty-placeholder",children:Object(i.jsxs)("div",{className:"empty-placeholder__content",children:[Object(i.jsx)("img",{className:"empty-placeholder__image",src:r,alt:"placeholder-img"}),Object(i.jsx)("p",{className:"empty-placeholder__message",children:t}),n&&Object(i.jsx)(c.a,{color:"secondary",variant:"outlined-secondary",size:"lg",onClick:function(){l.push(n)},children:"Go to available challenges \u27a1"})]})}):Object(i.jsx)("img",{className:"empty-placeholder__not-available",src:s,alt:"placeholder"})}l.defaultProps={message:"",pathRedirect:"",image:r};t.a=l},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={overviewPage:"Sorry... You have no challenge in progress or completed \ud83d\ude14",challengesPage:"Sorry... You have no challenge available \ud83d\ude14",shopPage:"Sorry... You have no challenge available \ud83d\ude14",shopPageAdmin:"Oups...you have to add some products, for that press add new button",validationPage:"Oups... you have no challenge to validate.",welcome:"Welcome to Gamify",notFound:"Page not found \ud83d\ude13"}},104:function(e,t,n){"use strict";n(0);var a=n(28),r=n.n(a),s=n(15),c=n(33),i=n(1);function l(e){var t=e.status,n=e.onValidate,a=e.onUpdateItem;return"inPending"===t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{color:"fourth",variant:"outlined-fourth",size:"sm",onClick:function(){return n(s.g.denied)},children:"Deny"}),Object(i.jsx)(c.a,{color:"tertiary",variant:"contained-tertiary",size:"md",onClick:function(){return n(s.g.validated)},children:"Validate"})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{color:"secondary",variant:"outlined-secondary",size:"sm",onClick:function(){return a("DELETE")},children:"Delete"}),Object(i.jsx)(c.a,{color:"secondary",variant:"contained-secondary",size:"md",onClick:function(){return a("EDIT")},children:"Edit"})]})}l.defaultProps={onValidate:r.a.func,onUpdateItem:r.a.func,status:""},t.a=l},107:function(e,t,n){"use strict";n(0);var a=n(1);function r(e){var t=e.title,n=e.isScrollable,r=e.hasData,s=e.children;return Boolean(r)&&Object(a.jsxs)("section",{className:"challenges-section",children:[Object(a.jsx)("h2",{className:"challenges-section__title",children:t}),Object(a.jsx)("div",{className:"challenges-section__items challenges-section__items--".concat(n&&"scrollable"),children:s})]})}r.defaultProps={isScrollable:!1},t.a=r},108:function(e,t,n){"use strict";n(0);var a=n(15),r=n(16),s=n(104),c=n(33),i=n(1);var l=function(e){var t=e.status,n=e.onClick;switch(t){case a.g.inProgress:return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{color:"secondary",variant:"outlined-secondary",size:"sm",onClick:function(){return n(a.g.available)},children:"Quit"}),Object(i.jsx)(c.a,{color:"secondary",variant:"contained-secondary",size:"md",onClick:function(){return n(a.g.inPending)},children:"Complete"})]});case a.g.inPending:return Object(i.jsx)(c.a,{size:"lg",disabled:!0,children:"Pending ..."});case a.g.validated:return Object(i.jsx)(c.a,{color:"tertiary",size:"lg",disabled:!0,children:"Validated"});case a.g.denied:return Object(i.jsx)(c.a,{color:"fourth",size:"lg",disabled:!0,children:"Denied"});default:return Object(i.jsx)(c.a,{color:"secondary",variant:"contained-secondary",size:"lg",onClick:function(){return n(a.g.inProgress)},children:"Enroll"})}},o=n(45),u=n(46);function d(e){var t=e.isAdmin,n=e.challenge,c=e.onChangeStatus,d=e.onUpdateChallenge,h=n.status;return Object(i.jsx)("div",{className:"challenge-card challenge-card--".concat(Object(a.b)(h)," challenge-card--").concat(t&&h===r.a.inPending&&"validation"),children:Object(i.jsxs)("div",{className:"challenge-card__content challenge-card__content--".concat(t&&h===r.a.inPending&&"extend"),children:[t&&h===r.a.inPending&&Object(i.jsx)("div",{children:Object(i.jsx)(u.a,{userName:n.userName,jobTitle:n.jobTitle,image:n.profilePicture})}),Object(i.jsxs)("div",{className:"challenge-card__top",children:[Object(i.jsx)("div",{className:"challenge-card__title",children:n.title}),Object(i.jsx)(o.a,{xp:n.xp,credits:n.credits})]}),Object(i.jsx)("div",{className:"challenge-card__middle",children:Object(i.jsx)("p",{className:"challenge-card__description",children:n.description})}),Object(i.jsx)("div",{className:"challenge-card__bottom",children:t?Object(i.jsx)(s.a,{status:h,onValidate:c,onUpdateItem:d}):Object(i.jsx)(l,{status:h,onClick:c})})]})})}d.defaultProps={onChangeStatus:function(){},onUpdateChallenge:function(){},isAdmin:!1};t.a=d},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(3),r=n(0),s=n.n(r),c=n(5),i=n(2),l=n(6),o=n(42),u=function(e){function t(t,n){var a;return(a=e.call(this)||this).client=t,a.setOptions(n),a.bindMethods(),a.updateResult(),a}Object(l.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(a.a)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(o.b)();this.currentResult=Object(a.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;c.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(14).a),d=n(20);function h(e,t,n){var r=s.a.useRef(!1),l=s.a.useState(0)[1],o=Object(i.k)(e,t,n),h=Object(d.b)(),b=s.a.useRef();b.current?b.current.setOptions(o):b.current=new u(h,o);var g=b.current.getCurrentResult();s.a.useEffect((function(){r.current=!0;var e=b.current.subscribe(c.a.batchCalls((function(){r.current&&l((function(e){return e+1}))})));return function(){r.current=!1,e()}}),[]);var p=s.a.useCallback((function(e,t){b.current.mutate(e,t).catch(i.i)}),[]);if(g.error&&b.current.options.useErrorBoundary)throw g.error;return Object(a.a)({},g,{mutate:p,mutateAsync:g.mutate})}},112:function(e,t,n){"use strict";var a=n(13),r=n.n(a),s=n(18),c=n(20),i=n(111),l=n(41),o=n(40),u=n(27),d=n(30),h=n(43);t.a=function(e){var t=Object(c.b)();function n(){return(n=Object(s.a)(r.a.mark((function t(n){var a,s,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.challengeId,s=n.userId,c=n.newStatus,t.prev=1,t.next=4,u.a.put("/api/user-challenges/".concat(a,"/").concat(s,"?newStatus=").concat(c),null,Object(o.a)(e));case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}return Object(i.a)((function(e){return n.apply(this,arguments)}),{onSuccess:function(e,n){var a=e.message;!function(e,t){switch(e){case h.a.inProgress:t.invalidateQueries(d.a.availableChallenges),t.invalidateQueries(d.a.progressOrCompletedChallenges,{refetchInactive:!0});break;case h.a.available:t.invalidateQueries(d.a.progressOrCompletedChallenges),t.invalidateQueries(d.a.availableChallenges,{refetchInactive:!0});break;case h.a.inPending:t.invalidateQueries(d.a.progressOrCompletedChallenges),t.invalidateQueries(d.a.validationChallenges,{refetchInactive:!0});break;case h.a.validated:case h.a.denied:t.invalidateQueries(d.a.validationChallenges),t.invalidateQueries(d.a.progressOrCompletedChallenges,{refetchInactive:!0})}}(n.newStatus,t),l.b.success(a)},onError:function(e){l.b.error(e.response.data.message)}})}},118:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(19),c=n(1);t.a=function(e){var t=e.page,n=e.itemsLength,i=e.path,l=Object(r.g)(),o=Math.ceil(n/6),u=n;return Object(a.useEffect)((function(){t<1?l.push("".concat(i,"?page=1")):t>o&&l.push("".concat(i,"?page=").concat(o))}),[l,o,t,i]),Object(c.jsxs)("div",{className:"pagination",children:[Object(c.jsx)(s.b,{to:"".concat(i,"?page=").concat(t-1),className:t<=1?"link-disabled":"",children:"\u2b05Prev"}),Object(c.jsxs)("p",{children:["Page ",t," of ",o," "]}),Object(c.jsxs)("p",{children:[u," Products Total"]}),Object(c.jsx)(s.b,{to:"".concat(i,"?page=").concat(t+1),className:t>=o?"link-disabled":"",children:"Next\u27a1"})]})}},127:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(107),s=n(13),c=n.n(s),i=n(18),l=n(97),o=n(40),u=n(27),d=n(30);var h=n(112),b=n(102),g=n(118),p=n(108),j=n(103),v=n(1);t.default=function(e){var t=e.user,n=Object(a.h)(),s=Number(new URLSearchParams(n.search).get("page")),m=Object(h.a)(t).mutate,f=function(e){return function(t){m({challengeId:e.id,userId:e.userId,newStatus:t})}},O=function(e,t){function n(){return(n=Object(i.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.get("/api/user-challenges/available?_page=".concat(t,"&_limit=").concat(6),Object(o.a)(e));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(l.a)([d.a.availableChallenges,t],(function(){return n.apply(this,arguments)}),{keepPreviousData:!0})}(t,s),x=O.data,y=O.isLoading,C=O.isError,_=O.error;return y?null:C?Object(v.jsx)(b.a,{message:_.response.data.message}):x.challenges.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(r.a,{title:"Available Challenges",hasData:x.challenges.length,children:x.challenges.map((function(e){return Object(v.jsx)(p.a,{challenge:e,onChangeStatus:f(e)},e.id)}))}),Object(v.jsx)(g.a,{page:s,itemsLength:x.totalAvailable,path:"/challenges"})]}):Object(v.jsx)(b.a,{message:j.a.challengesPage})}}}]);
//# sourceMappingURL=8.446ce49d.chunk.js.map